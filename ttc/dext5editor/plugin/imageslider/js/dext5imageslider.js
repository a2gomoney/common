(function(L){"function"===typeof define&&define.amd?define(L):"object"===typeof exports?module.exports=L():L()})(function(){var L="undefined"!==typeof window?window:this,R=L.Dext5ImageSlider=function(h,k){if(h._dext5imageslider)return h._dext5imageslider;this.ele=h;this.ele.classList.add("dext5-imgslider");this.viewerIcon=h.parentElement.getElementsByClassName("dext5-imgslider-viewericon")[0];this.ele._dext5imageslider=this;this.rootContainer=this.ele.parentElement;this.opt=Object.assign({},{slidesToScroll:1,
slidesToShow:1,resizeLock:!0,duration:.5,passiveListeners:!1,easing:function(g,n,v,E,t){return E*(n/=t)*n+v}},k);this.animate_id=this.page=this.slide=0;this.arrows={};this._opt=this.opt;if(this.opt.skipTrack)this.track=this.ele.children[0];else for(this.track=document.createElement("div"),this.ele.appendChild(this.track);1!==this.ele.children.length;)this.track.appendChild(this.ele.children[0]);this.track.classList.add("dext5-imgslider-track");this.track.setAttribute("raon_plugin","imageslider");
this.init();this.resize=this.init.bind(this,!0);this.event(this.ele,"add",{scroll:this.updateControls.bind(this)},{passive:this.opt.passiveListeners});this.event(L,"add",{resize:this.resize})},H=R.prototype;H.init=function(h,k){var g=this,n=0;g.slides=g.track.children;g.ele.addEventListener("mouseenter",()=>{g.ele.classList.add("on");g.viewerIcon.classList.add("active")});g.ele.addEventListener("mouseleave",t=>{g.viewerIcon.contains(t.relatedTarget)||(g.ele.classList.remove("on"),g.viewerIcon.classList.remove("active"))});
g.viewerIcon.addEventListener("mouseleave",t=>{g.ele.contains(t.relatedTarget)||(g.ele.classList.remove("on"),g.viewerIcon.classList.remove("active"))});[].forEach.call(g.slides,function(t,z){"IMG"==t.tagName&&(t.classList.add("dext5-imgslider-slide"),t.setAttribute("data-gslide",z),t.setAttribute("raon_plugin","imageslider"))});var v=0<g.slides.length&&"DIV"==g.slides[0].tagName;g.containerWidth=g.ele.parentElement.clientWidth;g.containerHeight=v?parseFloat(g.slides[0].style.height):g.ele.parentElement.clientHeight;
v=g.settingsBreakpoint();k||=v;if("auto"===g.opt.slidesToShow||"undefined"!==typeof g.opt._autoSlide){var E=g.containerWidth/g.opt.itemWidth;g.opt._autoSlide=g.opt.slidesToShow=g.opt.exactWidth?E:Math.max(1,Math.floor(E))}"auto"===g.opt.slidesToScroll&&(g.opt.slidesToScroll=Math.floor(g.opt.slidesToShow));g.itemWidth=g.opt.exactWidth?g.opt.itemWidth:g.containerWidth/g.opt.slidesToShow;[].forEach.call(g.slides,function(t){var z=parseFloat(t.style.width)||g.containerWidth,x=parseFloat(t.style.height)||
g.containerHeight;if(z>=g.containerWidth||x>=g.containerHeight){var B=Math.min(g.containerWidth/z,g.containerHeight/x);1===B?g.containerWidth<g.containerHeight&&z>=g.containerWidth?(t.style.width=`${g.containerWidth}px`,t.style.height="auto"):x>=g.containerHeight&&(t.style.height=`${g.containerHeight}px`,t.style.width="auto"):(t.style.width=`${z*B}px`,t.style.height=`${x*B}px`)}n+=g.containerWidth;t.hasChildNodes()?(t.style.width=g.containerWidth+"px",t.style.height=g.containerHeight+"px",t.style.display=
"flex",t.style.justifyContent="center",t.style.alignItems="center"):(z=document.createElement("div"),z.style.width=g.containerWidth+"px",z.style.height=g.containerHeight+"px",z.style.display="flex",z.style.justifyContent="center",z.style.alignItems="center",z.classList.add("dext5-imgslider-slide-div"),z.setAttribute("raon_plugin","imageslider"),t.parentNode.insertBefore(z,t),z.appendChild(t));"IMG"==t.tagName&&(t.style.removeProperty("width"),t.style.removeProperty("height"))});g.track.style.width=
n+"px";g.trackWidth=n;g.isDrag=!1;g.preventClick=!1;g.move=!1;g.opt.resizeLock&&g.scrollTo(g.slide*g.itemWidth,0);if(v||k)g.bindArrows(),g.buildDots(),g.bindDrag(),g._opt.skipTrack||(g.rootContainer.style.height=parseFloat(g.rootContainer.style.height)+20+"px");g.updateControls();g.emit(h?"refresh":"loaded");g.opt.callback&&"function"==typeof g.opt.callback&&g.opt.callback(g)};H.bindDrag=function(){var h=this;h.mouse=h.mouse||h.handleMouse.bind(h);var k=function(){h.mouseDown=void 0;h.ele.classList.remove("drag");
h.isDrag&&(h.preventClick=!0);h.isDrag=!1},g=function(){h.move=!0};k={mouseup:k,mouseleave:k,mousedown:function(n){n.preventDefault();n.stopPropagation();h.mouseDown=n.clientX;h.ele.classList.add("drag");h.move=!1;setTimeout(g,300)},touchstart:function(n){h.ele.classList.add("drag");h.move=!1;setTimeout(g,300)},mousemove:h.mouse,click:function(n){h.preventClick&&h.move&&(n.preventDefault(),n.stopPropagation());h.preventClick=!1;h.move=!1}};h.ele.classList.toggle("draggable",!0===h.opt.draggable);
h.event(h.ele,"remove",k);h.opt.draggable&&h.event(h.ele,"add",k,{passive:h.opt.passiveListeners})};H.buildDots=function(){if(this.opt.dots){if(this.dots="string"!==typeof this.opt.dots&&this.dots?this.opt.dots:this.rootContainer.querySelector(".dext5-imgslider-dots")){this.dots.innerHTML="";this.dots.setAttribute("role","tablist");this.dots.classList.add("dext5-imgslider-dots");for(var h=0;h<Math.ceil(this.slides.length/this.opt.slidesToShow);++h){var k=document.createElement("button");k.dataset.index=
h;k.setAttribute("aria-label","Page "+(h+1));k.setAttribute("role","tab");k.className="dext5-imgslider-dot "+(h?"":"active");this.event(k,"add",{click:this.scrollItem.bind(this,h,!0)});this.dots.appendChild(k)}}}else this.dots&&(this.dots.innerHTML="")};H.bindArrows=function(){var h=this;h.opt.arrows?["prev","next"].forEach(function(k){var g=h.opt.arrows[k];g&&("string"===typeof g&&(g=document.querySelector(g)),g&&(g._func=g._func||h.scrollItem.bind(h,k),h.event(g,"remove",{click:g._func}),h.event(g,
"add",{click:g._func}),h.arrows[k]=g))}):Object.keys(h.arrows).forEach(function(k){k=h.arrows[k];h.event(k,"remove",{click:k._func})})};H.updateSize=function(){var h=parseFloat(this.rootContainer.style.width);h!=parseFloat(this.containerWidth)&&(this.itemWidth=this.containerWidth=h,this.trackWidth=h*this.slides.length);h=parseFloat(this.slides[0].style.height);h!=parseFloat(this.containerHeight)&&(this.containerHeight=h)};H.updateControls=function(h){this.updateSize();var k=this;h&&!k.opt.scrollPropagate&&
h.stopPropagation();var g=k.containerWidth>=k.trackWidth;k.opt.rewind||(k.arrows.prev&&(k.arrows.prev.classList.toggle("disabled",0>=k.ele.scrollLeft||g),k.arrows.prev.setAttribute("aria-disabled",k.arrows.prev.classList.contains("disabled"))),k.arrows.next&&(k.arrows.next.classList.toggle("disabled",Math.ceil(k.ele.scrollLeft+k.containerWidth)>=Math.floor(k.trackWidth)||g),k.arrows.next.setAttribute("aria-disabled",k.arrows.next.classList.contains("disabled"))));k.slide=Math.round(k.ele.scrollLeft/
k.itemWidth);k.page=Math.round(k.ele.scrollLeft/k.containerWidth);var n=k.slide+Math.floor(Math.floor(k.opt.slidesToShow)/2),v=Math.floor(k.opt.slidesToShow)%2?0:n+1;1===Math.floor(k.opt.slidesToShow)&&(v=0);k.ele.scrollLeft+k.containerWidth>=Math.floor(k.trackWidth)&&(k.page=k.dots?k.dots.children.length-1:0);[].forEach.call(k.slides,function(E,t){var z=E.classList;E=z.contains("visible");var x=k.ele.scrollLeft,B=k.ele.scrollLeft+k.containerWidth,O=k.itemWidth*t,T=O+k.itemWidth;[].forEach.call(z,
function(u){/^left|right/.test(u)&&z.remove(u)});z.toggle("active",k.slide===t);n===t||v&&v===t?z.add("center"):(z.remove("center"),z.add([t<n?"left":"right",Math.abs(t-(t<n?n:v||n))].join("-")));x=Math.ceil(O)>=Math.floor(x)&&Math.floor(T)<=Math.ceil(B);z.toggle("visible",x);x!==E&&k.emit("slide-"+(x?"visible":"hidden"),{slide:t})});k.dots&&[].forEach.call(k.dots.children,function(E,t){E.classList.toggle("active",k.page===t)});h&&k.opt.scrollLock&&(clearTimeout(k.scrollLock),k.scrollLock=setTimeout(function(){clearTimeout(k.scrollLock);
.02<Math.abs(k.ele.scrollLeft/k.itemWidth-k.slide)&&(k.mouseDown||k.trackWidth>k.containerWidth+k.ele.scrollLeft&&k.scrollItem(k.getCurrentSlide()))},k.opt.scrollLockDelay||250))};H.getCurrentSlide=function(){return this.round(this.ele.scrollLeft/this.itemWidth)};H.scrollItem=function(h,k,g){g&&g.preventDefault();var n=this,v=h;++n.animate_id;g=n.slide;if(!0===k){h=Math.round(h*n.containerWidth/n.itemWidth);var E=h*n.itemWidth}else{if("string"===typeof h&&(E="prev"===h,h=n.opt.slidesToScroll%1||n.opt.slidesToShow%
1?n.getCurrentSlide():n.slide,h=E?h-n.opt.slidesToScroll:h+n.opt.slidesToScroll,n.opt.rewind)){var t=n.ele.scrollLeft;h=E&&!t?n.slides.length:!E&&t+n.containerWidth>=Math.floor(n.trackWidth)?0:h}h=Math.max(Math.min(h,n.slides.length),0);n.slide=h;E=n.itemWidth*h}n.emit("scroll-item",{prevSlide:g,slide:h});n.scrollTo(E,n.opt.duration*Math.abs(n.ele.scrollLeft-E),function(){n.updateControls();n.emit("animated",{value:v,type:"string"===typeof v?"arrow":k?"dot":"slide"})});return!1};H.settingsBreakpoint=
function(){var h=this._opt.responsive;if(h){h.sort(function(n,v){return v.breakpoint-n.breakpoint});for(var k=0;k<h.length;++k){var g=h[k];if(L.innerWidth>=g.breakpoint)return this.breakpoint!==g.breakpoint?(this.opt=Object.assign({},this._opt,g.settings),this.breakpoint=g.breakpoint,!0):!1}}h=0!==this.breakpoint;this.opt=Object.assign({},this._opt);this.breakpoint=0;return h};H.scrollTo=function(h,k,g){var n=this,v=(new Date).getTime(),E=n.animate_id,t=function(){var z=(new Date).getTime()-v;n.ele.scrollLeft+=
(h-n.ele.scrollLeft)*n.opt.easing(0,z,0,1,k);z<k&&E===n.animate_id?L.requestAnimationFrame(t):(n.ele.scrollLeft=h,g&&g.call(n))};L.requestAnimationFrame(t)};H.removeItem=function(h){this.slides.length&&(this.track.removeChild(this.slides[h]),this.refresh(!0),this.emit("remove"))};H.addItem=function(h){this.track.appendChild(h);this.refresh(!0);this.emit("add")};H.handleMouse=function(h){this.mouseDown&&(this.isDrag=!0,this.ele.scrollLeft+=(this.mouseDown-h.clientX)*(this.opt.dragVelocity||3.3),this.mouseDown=
h.clientX)};H.round=function(h){var k=1/(this.opt.slidesToScroll%1||1);return Math.round(h*k)/k};H.refresh=function(h){this.init(!0,h)};H.setOption=function(h,k){var g=this;g.breakpoint&&!k?g._opt.responsive.forEach(function(n){n.breakpoint===g.breakpoint&&(n.settings=Object.assign({},n.settings,h))}):g._opt=Object.assign({},g._opt,h);g.breakpoint=0;g.settingsBreakpoint()};H.destroy=function(){var h=this.ele.cloneNode(!0),k=function(g){g.removeAttribute("style");[].forEach.call(g.classList,function(n){/^dext5-imgslider/.test(n)&&
g.classList.remove(n)})};this.opt.skipTrack||(h.children[0].outerHTML=h.children[0].innerHTML);k(h);[].forEach.call(h.getElementsByTagName("*"),k);this.ele.parentNode.replaceChild(h,this.ele);this.event(L,"remove",{resize:this.resize});this.emit("destroy")};H.emit=function(h,k){h=new L.CustomEvent("dext5-imgslider-"+h,{bubbles:!this.opt.eventPropagate,detail:k});this.ele.dispatchEvent(h)};H.event=function(h,k,g){var n=h[k+"EventListener"].bind(h);Object.keys(g).forEach(function(v){n(v,g[v])})};R.initLoad=
function(h){h&&(h=h.getElementsByClassName("dext5-imgslider-contain"),Array.from(h).forEach(function(k){var g={slidesToShow:1,skipTrack:!0,draggable:"true"===k.getAttribute("data-is-dragable"),rewind:"true"===k.getAttribute("data-is-rewindable"),callback:function(n){new Viewer(n,{inline:!1,navbar:!0,toolbar:!0,title:!0,tooltip:!0,movable:!0,zoomable:!0,scalable:!0,fullscreen:!0,transition:!0})}};"true"===k.getAttribute("data-use-dots")&&(g.dots=k.getElementsByClassName("dext5-imgslider-dots")[0]);
"true"===k.getAttribute("data-use-arrows")&&(g.arrows={prev:k.getElementsByClassName("dext5-imgslider-prev")[0],next:k.getElementsByClassName("dext5-imgslider-next")[0]});new R(k.getElementsByClassName("dext5-imgslider-single")[0],g)}))};window.addEventListener("load",function(){R.initLoad(document)});return R});
(function(L,R){"object"===typeof exports&&"undefined"!==typeof module?module.exports=R():"function"===typeof define&&define.amd?define(R):(L="undefined"!==typeof globalThis?globalThis:L||self,L.Viewer=R())})(this,function(){function L(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,k(d.key),d)}}function R(a,b,c){return b&&L(a.prototype,b),c&&L(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}
function H(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}));c.push.apply(c,d)}return c}function h(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?H(Object(c),!0).forEach(function(d){var e=d;d=c[d];(e=k(e))in a?Object.defineProperty(a,e,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[e]=d}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,
Object.getOwnPropertyDescriptors(c)):H(Object(c)).forEach(function(d){Object.defineProperty(a,d,Object.getOwnPropertyDescriptor(c,d))})}return a}function k(a){a:if("object"==typeof a&&a){var b=a[Symbol.toPrimitive];if(void 0!==b){a=b.call(a,"string");if("object"!=typeof a)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}a=String(a)}return"symbol"==typeof a?a:a+""}function g(a){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:
function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},g(a)}function n(a){return"string"===typeof a}function v(a){return"number"===typeof a&&!Aa(a)}function E(a){return"undefined"===typeof a}function t(a){return"object"===g(a)&&null!==a}function z(a){if(!t(a))return!1;try{var b=a.constructor,c=b.prototype;return b&&c&&Ba.call(c,"isPrototypeOf")}catch(d){return!1}}function x(a){return"function"===typeof a}function B(a,b){if(a&&x(b))if(Array.isArray(a)||
v(a.length)){var c=a.length,d;for(d=0;d<c&&!1!==b.call(a,a[d],d,a);d+=1);}else t(a)&&Object.keys(a).forEach(function(e){b.call(a,a[e],e,a)});return a}function O(a,b){var c=a.style;B(b,function(d,e){Ca.test(e)&&v(d)&&(d+="px");c[e]=d})}function T(a,b){return a&&b?a.classList?a.classList.contains(b):-1<a.className.indexOf(b):!1}function u(a,b){if(a&&b)if(v(a.length))B(a,function(d){u(d,b)});else if(a.classList)a.classList.add(b);else{var c=a.className.trim();c?0>c.indexOf(b)&&(a.className="".concat(c,
" ").concat(b)):a.className=b}}function C(a,b){a&&b&&(v(a.length)?B(a,function(c){C(c,b)}):a.classList?a.classList.remove(b):0<=a.className.indexOf(b)&&(a.className=a.className.replace(b,"")))}function aa(a,b,c){b&&(v(a.length)?B(a,function(d){aa(d,b,c)}):c?u(a,b):C(a,b))}function la(a){return a.replace(Da,"$1-$2").toLowerCase()}function V(a,b){return t(a[b])?a[b]:a.dataset?a.dataset[b]:a.getAttribute("data-".concat(la(b)))}function ma(a,b,c){t(c)?a[b]=c:a.dataset?a.dataset[b]=c:a.setAttribute("data-".concat(la(b)),
c)}function F(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},e=c;b.trim().split(na).forEach(function(f){if(!ra){var l=a.listeners;l&&l[f]&&l[f][c]&&(e=l[f][c],delete l[f][c],0===Object.keys(l[f]).length&&delete l[f],0===Object.keys(l).length&&delete a.listeners)}a.removeEventListener(f,e,d)})}function w(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},e=c;b.trim().split(na).forEach(function(f){if(d.once&&!ra){var l=a.listeners,p=void 0===l?{}:l;e=function(){delete p[f][c];
a.removeEventListener(f,e,d);for(var m=arguments.length,r=Array(m),q=0;q<m;q++)r[q]=arguments[q];c.apply(a,r)};p[f]||(p[f]={});p[f][c]&&a.removeEventListener(f,p[f][c],d);p[f][c]=e;a.listeners=p}a.addEventListener(f,e,d)})}function K(a,b,c,d){x(Event)&&x(CustomEvent)?d=new CustomEvent(b,h({bubbles:!0,cancelable:!0,detail:c},d)):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c));return a.dispatchEvent(d)}function Ea(a){a=a.getBoundingClientRect();return{left:a.left+(window.pageXOffset-
document.documentElement.clientLeft),top:a.top+(window.pageYOffset-document.documentElement.clientTop)}}function ca(a){var b=a.rotate,c=a.scaleX,d=a.scaleY,e=a.translateX;a=a.translateY;var f=[];v(e)&&0!==e&&f.push("translateX(".concat(e,"px)"));v(a)&&0!==a&&f.push("translateY(".concat(a,"px)"));v(b)&&0!==b&&f.push("rotate(".concat(b,"deg)"));v(c)&&1!==c&&f.push("scaleX(".concat(c,")"));v(d)&&1!==d&&f.push("scaleY(".concat(d,")"));b=f.length?f.join(" "):"none";return{WebkitTransform:b,msTransform:b,
transform:b}}function Fa(a){return n(a)?decodeURIComponent(a.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}function sa(a,b,c){var d=document.createElement("img");if(a.naturalWidth&&!oa)return c(a.naturalWidth,a.naturalHeight),d;var e=document.body||document.documentElement;d.onload=function(){c(d.width,d.height);oa||e.removeChild(d)};B(b.inheritedAttributes,function(f){var l=a.getAttribute(f);null!==l&&d.setAttribute(f,l)});d.src=a.src;oa||(d.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",
e.appendChild(d));return d}function da(a){switch(a){case 2:return Ga;case 3:return Ha;case 4:return Ia;default:return""}}function Ja(a){var b=h({},a),c=[];B(a,function(d,e){delete b[e];B(b,function(f){var l=Math.abs(d.startX-f.startX),p=Math.abs(d.startY-f.startY),m=Math.abs(d.endX-f.endX);f=Math.abs(d.endY-f.endY);l=Math.sqrt(l*l+p*p);c.push((Math.sqrt(m*m+f*f)-l)/l)})});c.sort(function(d,e){return Math.abs(d)<Math.abs(e)});return c[0]}function ea(a,b){var c=a.pageX;a=a.pageY;var d={endX:c,endY:a};
return b?d:h({timeStamp:Date.now(),startX:c,startY:a},d)}function Ka(a){var b=0,c=0,d=0;B(a,function(e){var f=e.startY;b+=e.startX;c+=f;d+=1});b/=d;c/=d;return{pageX:b,pageY:c}}var ta={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:"crossOrigin decoding isMap loading referrerPolicy sizes srcset useMap".split(" "),initialCoverage:.9,initialViewIndex:0,inline:!1,interval:5E3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,
minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},fa="undefined"!==typeof window&&"undefined"!==typeof window.document,S=fa?window:
{},W=fa&&S.document.documentElement?"ontouchstart"in S.document.documentElement:!1,X=fa?"PointerEvent"in S:!1,ha="".concat("viewer","-active"),La="".concat("viewer","-close"),ia="".concat("viewer","-fade"),pa="".concat("viewer","-fixed"),Ma="".concat("viewer","-fullscreen"),ua="".concat("viewer","-fullscreen-exit"),U="".concat("viewer","-hide"),Ia="".concat("viewer","-hide-md-down"),Ha="".concat("viewer","-hide-sm-down"),Ga="".concat("viewer","-hide-xs-down"),P="".concat("viewer","-in"),ba="".concat("viewer",
"-invisible"),Y="".concat("viewer","-loading"),Na="".concat("viewer","-move"),va="".concat("viewer","-open"),Z="".concat("viewer","-show"),I="".concat("viewer","-transition"),wa=X?"pointerdown":W?"touchstart":"mousedown",xa=X?"pointermove":W?"touchmove":"mousemove",ya=X?"pointerup pointercancel":W?"touchend touchcancel":"mouseup",ja="".concat("viewer","Action"),na=/\s\s*/,ka="zoom-in zoom-out one-to-one reset prev play next rotate-left rotate-right flip-horizontal flip-vertical".split(" "),Aa=Number.isNaN||
S.isNaN,Ba=Object.prototype.hasOwnProperty,Q=Object.assign||function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];t(a)&&0<c.length&&c.forEach(function(e){t(e)&&Object.keys(e).forEach(function(f){a[f]=e[f]})});return a},Ca=/^(?:width|height|left|top|marginLeft|marginTop)$/,Da=/([a-z\d])([A-Z])/g,ra=function(){var a=!1;if(fa){var b=!1,c=function(){},d=Object.defineProperty({},"once",{get:function(){a=!0;return b},set:function(e){b=e}});S.addEventListener("test",c,
d);S.removeEventListener("test",c,d)}return a}(),oa=S.navigator&&/Version\/\d+(\.\d+)+?\s+Safari/i.test(S.navigator.userAgent),Oa=S.Viewer,Pa=function(a){return function(){return a+=1}}(-1);X=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=b.track;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");d&&1===d.nodeType&&(this.element=d,this.options=Q({},ta,z(c)&&c),this.imageClicked=this.hiding=this.fulled=this.fading=this.action=
!1,this.imageData={},this.index=this.options.initialViewIndex,this.isShown=this.isImg=!1,this.length=0,this.playing=this.played=this.moving=!1,this.pointers={},this.pointerMoved=this.zooming=this.wheeling=this.viewing=this.viewed=this.tooltipping=this.timeout=this.showing=this.scaling=this.rotating=this.ready=!1,this.id=Pa(),this.isDextEditorPresent=this.options.isDextEditorPresent,this.backIframe=this.options.backIframe,this.viewericon=d.parentElement.parentElement.getElementsByClassName("dext5-imgslider-viewericon")[0],
this.slider=b,this.init())}return R(a,[{key:"init",value:function(){var b=this,c=this.element,d=this.options;if(!c.viewer){c.viewer=this;d.focus&&!d.keyboard&&(d.focus=!1);var e="img"===c.localName,f=[];B(e?[c]:c.querySelectorAll("img"),function(m){x(d.filter)?d.filter.call(b,m)&&f.push(m):b.getImageURL(m)&&f.push(m)});this.isImg=e;this.length=f.length;this.images=f;this.initBody();E(document.createElement("viewer").style.transition)&&(d.transition=!1);if(d.inline){var l=0,p=function(){l+=1;if(l===
b.length){b.initializing=!1;b.delaying={abort:function(){clearTimeout(m)}};var m=setTimeout(function(){b.delaying=!1;b.build()},0)}};this.initializing={abort:function(){B(f,function(m){m.complete||(F(m,"load",p),F(m,"error",p))})}};B(f,function(m){if(m.complete)p();else{var r,q;w(m,"load",r=function(){F(m,"error",q);p()},{once:!0});w(m,"error",q=function(){F(m,"load",r);p()},{once:!0})}})}else w(this.viewericon,"click",this.onStart=function(m){var r=(m=(m=(m=this&&this.ownerDocument)&&m.defaultView)&&
m.parent)&&m._dext_editor?!0:!1,q=b.slider.slides[b.slider.page].firstChild;"DIV"==q.tagName&&(q=q.firstChild);if("IMG"==q.tagName)if(r){var D=q.closest(".dext5-imgslider-contain"),J=D.cloneNode(!0);J.style.display="none";D&&m._dext_editor._FRAMEWIN.G_DEPlugin.imageslider.loadModal({sliderHtmlStr:J.outerHTML,index:q.getAttribute("data-gslide"),isDextEditorPresent:r})}else x(d.filter)&&!d.filter.call(b,q)||b.view(q.getAttribute("data-gslide"))})}}},{key:"build",value:function(){if(!this.ready){var b=
this.element,c=this.options,d=b.parentNode,e=document.createElement("div");e.innerHTML='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>';
var f=e.querySelector(".".concat("viewer","-container")),l=f.querySelector(".".concat("viewer","-title")),p=f.querySelector(".".concat("viewer","-toolbar")),m=f.querySelector(".".concat("viewer","-navbar"));e=f.querySelector(".".concat("viewer","-button"));var r=f.querySelector(".".concat("viewer","-canvas"));this.parent=d;this.viewer=f;this.title=l;this.toolbar=p;this.navbar=m;this.button=e;this.canvas=r;this.footer=f.querySelector(".".concat("viewer","-footer"));this.tooltipBox=f.querySelector(".".concat("viewer",
"-tooltip"));this.player=f.querySelector(".".concat("viewer","-player"));this.list=f.querySelector(".".concat("viewer","-list"));f.id="".concat("viewer").concat(this.id);l.id="".concat("viewer","Title").concat(this.id);u(l,c.title?da(Array.isArray(c.title)?c.title[0]:c.title):U);u(m,c.navbar?da(c.navbar):U);aa(e,U,!c.button);c.keyboard&&e.setAttribute("tabindex",0);c.backdrop&&(u(f,"".concat("viewer","-backdrop")),c.inline||"static"===c.backdrop||ma(r,ja,"hide"));n(c.className)&&c.className&&c.className.split(na).forEach(function(A){u(f,
A)});if(c.toolbar){var q=document.createElement("ul"),D=z(c.toolbar),J=ka.slice(0,3),G=ka.slice(7,9),y=ka.slice(9);D||u(p,da(c.toolbar));B(D?c.toolbar:ka,function(A,N){var M=D&&z(A);N=D?la(N):A;var qa=M&&!E(A.show)?A.show:A;if(qa&&(c.zoomable||-1===J.indexOf(N))&&(c.rotatable||-1===G.indexOf(N))&&(c.scalable||-1===y.indexOf(N))){var za=M&&!E(A.size)?A.size:A;A=M&&!E(A.click)?A.click:A;M=document.createElement("li");c.keyboard&&M.setAttribute("tabindex",0);M.setAttribute("role","button");u(M,"".concat("viewer",
"-").concat(N));x(A)||ma(M,ja,N);v(qa)&&u(M,da(qa));-1!==["small","large"].indexOf(za)?u(M,"".concat("viewer","-").concat(za)):"play"===N&&u(M,"".concat("viewer","-large"));x(A)&&w(M,"click",A);q.appendChild(M)}});p.appendChild(q)}else u(p,U);c.rotatable||(l=p.querySelectorAll('li[class*="rotate"]'),u(l,ba),B(l,function(A){p.appendChild(A)}));c.inline?(u(e,Ma),O(f,{zIndex:c.zIndexInline}),"static"===window.getComputedStyle(d).position&&O(d,{position:"relative"}),d.insertBefore(f,b.nextSibling)):(u(e,
La),u(f,pa),u(f,ia),u(f,U),O(f,{zIndex:c.zIndex}),d=c.container,n(d)&&(d=b.ownerDocument.querySelector(d)),d||(d=this.body),d.appendChild(f));c.inline&&(this.render(),this.bind(),this.isShown=!0);this.ready=!0;x(c.ready)&&w(b,"ready",c.ready,{once:!0});!1===K(b,"ready")?this.ready=!1:this.ready&&c.inline&&this.view(this.index)}}}],[{key:"noConflict",value:function(){window.Viewer=Oa;return a}},{key:"setDefaults",value:function(b){Q(ta,z(b)&&b)}}])}();Q(X.prototype,{render:function(){this.initContainer();
this.initViewer();this.initList();this.renderViewer()},initBody:function(){var a=this.element.ownerDocument,b=a.body||a.documentElement;this.body=b;this.scrollbarWidth=window.innerWidth-a.documentElement.clientWidth;this.initialBodyPaddingRight=b.style.paddingRight;this.initialBodyComputedPaddingRight=window.getComputedStyle(b).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var a=this.options,b=this.parent,c;a.inline&&
(this.parentData=c={width:Math.max(b.offsetWidth,a.minWidth),height:Math.max(b.offsetHeight,a.minHeight)});if(this.fulled||!c)c=this.containerData;this.viewerData=Q({},c)},renderViewer:function(){this.options.inline&&!this.fulled&&O(this.viewer,this.viewerData)},initList:function(){var a=this,b=this.element,c=this.options,d=this.list,e=[];d.innerHTML="";B(this.images,function(f,l){var p=f.src,m=f.alt||Fa(p),r=a.getImageURL(f);if(p||r){var q=document.createElement("li"),D=document.createElement("img");
B(c.inheritedAttributes,function(J){var G=f.getAttribute(J);null!==G&&D.setAttribute(J,G)});c.navbar&&(D.src=p||r);D.alt=m;D.setAttribute("data-original-url",r||p);q.setAttribute("data-index",l);q.setAttribute("data-viewer-action","view");q.setAttribute("role","button");c.keyboard&&q.setAttribute("tabindex",0);q.appendChild(D);d.appendChild(q);e.push(q)}});this.items=e;B(e,function(f){var l=f.firstElementChild,p,m;ma(l,"filled",!0);c.loading&&u(f,Y);w(l,"load",p=function(r){F(l,"error",m);c.loading&&
C(f,Y);a.loadImage(r)},{once:!0});w(l,"error",m=function(){F(l,"load",p);c.loading&&C(f,Y)},{once:!0})});c.transition&&w(b,"viewed",function(){u(d,I)},{once:!0})},renderList:function(){var a=this.index,b=this.items[a];if(b){var c=parseInt(window.getComputedStyle(b.nextElementSibling||b).marginLeft,10);b=b.offsetWidth;var d=b+c;O(this.list,Q({width:d*this.length-c},ca({translateX:(this.viewerData.width-b)/2-d*a})))}},resetList:function(){var a=this.list;a.innerHTML="";C(a,I);O(a,ca({translateX:0}))},
initImage:function(a){var b=this,c=this.options,d=this.image,e=this.viewerData,f=this.footer.offsetHeight,l=e.width,p=Math.max(e.height-f,f),m=this.imageData||{};this.imageInitializing={abort:function(){r.onload=null}};var r=sa(d,c,function(q,D){var J=q/D,G=Math.max(0,Math.min(1,c.initialCoverage)),y=l,A=p;b.imageInitializing=!1;p*J>l?A=l/J:y=p*J;G=v(G)?G:.9;y=Math.min(y*G,q);A=Math.min(A*G,D);G=(l-y)/2;var N=(p-A)/2;q={left:G,top:N,x:G,y:N,width:y,height:A,oldRatio:1,ratio:y/q,aspectRatio:J,naturalWidth:q,
naturalHeight:D};D=Q({},q);c.rotatable&&(q.rotate=m.rotate||0,D.rotate=0);c.scalable&&(q.scaleX=m.scaleX||1,q.scaleY=m.scaleY||1,D.scaleX=1,D.scaleY=1);b.imageData=q;b.initialImageData=D;a&&a()})},renderImage:function(a){var b=this,c=this.image,d=this.imageData;O(c,Q({width:d.width,height:d.height,marginLeft:d.x,marginTop:d.y},ca(d)));if(a)if((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&T(c,I)){var e=function(){b.imageRendering=!1;a()};this.imageRendering=
{abort:function(){F(c,"transitionend",e)}};w(c,"transitionend",e,{once:!0})}else a()},resetImage:function(){var a=this.image;a&&(this.viewing&&this.viewing.abort(),a.parentNode.removeChild(a),this.image=null,this.title.innerHTML="")}},{bind:function(){var a=this.options,b=this.viewer,c=this.canvas,d=this.element.ownerDocument;w(b,"click",this.onClick=this.click.bind(this));w(b,"dragstart",this.onDragStart=this.dragstart.bind(this));w(c,wa,this.onPointerDown=this.pointerdown.bind(this));w(d,xa,this.onPointerMove=
this.pointermove.bind(this));w(d,ya,this.onPointerUp=this.pointerup.bind(this));w(d,"keydown",this.onKeyDown=this.keydown.bind(this));w(window,"resize",this.onResize=this.resize.bind(this));a.zoomable&&a.zoomOnWheel&&w(b,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0});a.toggleOnDblclick&&w(c,"dblclick",this.onDblclick=this.dblclick.bind(this))},unbind:function(){var a=this.options,b=this.viewer,c=this.canvas,d=this.element.ownerDocument;F(b,"click",this.onClick);F(b,"dragstart",
this.onDragStart);F(c,wa,this.onPointerDown);F(d,xa,this.onPointerMove);F(d,ya,this.onPointerUp);F(d,"keydown",this.onKeyDown);F(window,"resize",this.onResize);a.zoomable&&a.zoomOnWheel&&F(b,"wheel",this.onWheel,{passive:!1,capture:!0});a.toggleOnDblclick&&F(c,"dblclick",this.onDblclick)}},{click:function(a){var b=this.options,c=this.imageData,d=a.target,e=V(d,ja);e||"img"!==d.localName||"li"!==d.parentElement.localName||(d=d.parentElement,e=V(d,ja));W&&a.isTrusted&&d===this.canvas&&clearTimeout(this.clickCanvasTimeout);
switch(e){case "mix":this.played?this.stop():b.inline?this.fulled?this.exit():this.full():this.hide();break;case "hide":this.pointerMoved||this.hide();break;case "view":this.view(V(d,"index"));break;case "zoom-in":this.zoom(.1,!0);break;case "zoom-out":this.zoom(-.1,!0);break;case "one-to-one":this.toggle();break;case "reset":this.reset();break;case "prev":this.prev(b.loop);break;case "play":this.play(b.fullscreen);break;case "next":this.next(b.loop);break;case "rotate-left":this.rotate(-90);break;
case "rotate-right":this.rotate(90);break;case "flip-horizontal":this.scaleX(-c.scaleX||-1);break;case "flip-vertical":this.scaleY(-c.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(a){a.preventDefault();this.viewed&&a.target===this.image&&(W&&a.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(a.isTrusted?a:a.detail&&a.detail.originalEvent))},load:function(){var a=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var b=this.element,c=this.options,
d=this.image,e=this.index,f=this.viewerData;C(d,ba);c.loading&&C(this.canvas,Y);d.style.cssText="height:0;"+"margin-left:".concat(f.width/2,"px;")+"margin-top:".concat(f.height/2,"px;")+"max-width:none!important;position:relative;width:0;";this.initImage(function(){aa(d,Na,c.movable);aa(d,I,c.transition);a.renderImage(function(){a.viewed=!0;a.viewing=!1;x(c.viewed)&&w(b,"viewed",c.viewed,{once:!0});K(b,"viewed",{originalImage:a.images[e],index:e,image:d},{cancelable:!1})})})},loadImage:function(a){var b=
a.target;a=b.parentNode;var c=a.offsetWidth||30,d=a.offsetHeight||50,e=!!V(b,"filled");sa(b,this.options,function(f,l){f/=l;l=c;var p=d;d*f>c?e?l=d*f:p=c/f:e?p=c/f:l=d*f;O(b,Q({width:l,height:p},ca({translateX:(c-l)/2,translateY:(d-p)/2})))})},keydown:function(a){var b=this.options;if(b.keyboard){var c=a.keyCode||a.which||a.charCode;switch(c){case 13:this.viewer.contains(a.target)&&this.click(a)}if(this.fulled)switch(c){case 27:this.played?this.stop():b.inline?this.fulled&&this.exit():this.hide();
break;case 32:this.played&&this.stop();break;case 37:this.played&&this.playing?this.playing.prev():this.prev(b.loop);break;case 38:a.preventDefault();this.zoom(b.zoomRatio,!0);break;case 39:this.played&&this.playing?this.playing.next():this.next(b.loop);break;case 40:a.preventDefault();this.zoom(-b.zoomRatio,!0);break;case 48:case 49:a.ctrlKey&&(a.preventDefault(),this.toggle())}}},dragstart:function(a){"img"===a.target.localName&&a.preventDefault()},pointerdown:function(a){var b=this.options,c=this.pointers,
d=a.buttons,e=a.button;this.pointerMoved=!1;!this.viewed||this.showing||this.viewing||this.hiding||("mousedown"===a.type||"pointerdown"===a.type&&"mouse"===a.pointerType)&&(v(d)&&1!==d||v(e)&&0!==e||a.ctrlKey)||(a.preventDefault(),a.changedTouches?B(a.changedTouches,function(f){c[f.identifier]=ea(f)}):c[a.pointerId||0]=ea(a),d=b.movable?"move":!1,b.zoomOnTouch&&b.zoomable&&1<Object.keys(c).length?d="zoom":b.slideOnTouch&&("touch"===a.pointerType||"touchstart"===a.type)&&this.isSwitchable()&&(d="switch"),
!b.transition||"move"!==d&&"zoom"!==d||C(this.image,I),this.action=d)},pointermove:function(a){var b=this.pointers,c=this.action;this.viewed&&c&&(a.preventDefault(),a.changedTouches?B(a.changedTouches,function(d){Q(b[d.identifier]||{},ea(d,!0))}):Q(b[a.pointerId||0]||{},ea(a,!0)),this.change(a))},pointerup:function(a){var b=this,c=this.options,d=this.action,e=this.pointers;if(a.changedTouches)B(a.changedTouches,function(l){f=e[l.identifier];delete e[l.identifier]});else{var f=e[a.pointerId||0];delete e[a.pointerId||
0]}d&&(a.preventDefault(),!c.transition||"move"!==d&&"zoom"!==d||u(this.image,I),this.action=!1,W&&"zoom"!==d&&f&&500>Date.now()-f.timeStamp&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),c.toggleOnDblclick&&this.viewed&&a.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){K(b.image,"dblclick",{originalEvent:a})},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){b.imageClicked=
!1},500)):(this.imageClicked=!1,c.backdrop&&"static"!==c.backdrop&&a.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){K(b.canvas,"click",{originalEvent:a})},50)))))},resize:function(){var a=this;this.isShown&&!this.hiding&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){a.renderImage()}),this.played&&(!this.options.fullscreen||!this.fulled||document.fullscreenElement||
document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?B(this.player.getElementsByTagName("img"),function(b){w(b,"load",a.loadImage.bind(a),{once:!0});K(b,"load")}):this.stop()))},wheel:function(a){var b=this;if(this.viewed&&(a.preventDefault(),!this.wheeling)){this.wheeling=!0;setTimeout(function(){b.wheeling=!1},50);var c=Number(this.options.zoomRatio)||.1,d=1;a.deltaY?d=0<a.deltaY?1:-1:a.wheelDelta?d=-a.wheelDelta/120:a.detail&&(d=0<a.detail?1:-1);this.zoom(-d*
c,!0,null,a)}}},{show:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,b=this.element,c=this.options;if(c.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(a),this;x(c.show)&&w(b,"show",c.show,{once:!0});if(!1===K(b,"show")||!this.ready)return this;this.hiding&&this.transitioning.abort();this.showing=!0;this.open();var d=this.viewer;C(d,U);d.setAttribute("role","dialog");d.setAttribute("aria-labelledby",
this.title.id);d.setAttribute("aria-modal",!0);d.removeAttribute("aria-hidden");if(c.transition&&!a){var e=this.shown.bind(this);this.transitioning={abort:function(){F(d,"transitionend",e);C(d,P)}};u(d,I);d.initialOffsetWidth=d.offsetWidth;w(d,"transitionend",e,{once:!0});u(d,P)}else u(d,P),this.shown();return this},hide:function(){var a=this;if(a.isDextEditorPresent)this.destroy(),this.backIframe.innerHTML="",this.backIframe.style.display="none";else{var b=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:!1,c=this.element,d=this.options;if(d.inline||this.hiding||!this.isShown&&!this.showing)return this;x(d.hide)&&w(c,"hide",d.hide,{once:!0});if(!1===K(c,"hide"))return this;this.showing&&this.transitioning.abort();this.hiding=!0;this.played?this.stop():this.viewing&&this.viewing.abort();var e=this.viewer,f=this.image;if(d.transition&&!b){var l=function(m){m&&m.target===e&&(F(e,"transitionend",l),a.hidden())},p=function(){T(e,I)?(w(e,"transitionend",l),C(e,P)):(C(e,P),a.hidden())};this.transitioning=
{abort:function(){a.viewed&&T(f,I)?F(f,"transitionend",p):T(e,I)&&F(e,"transitionend",l)}};this.viewed&&T(f,I)?(w(f,"transitionend",p,{once:!0}),this.zoomTo(0,!1,null,null,!0)):p()}else C(e,P),a.hidden();return this}},view:function(a){var b=this;"undefined"===typeof a&&(a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.initialViewIndex);a=Number(a)||0;if(this.hiding||this.played||0>a||a>=this.length||this.viewed&&a===this.index)return this;if(!this.isShown)return this.index=a,
this.show();this.viewing&&this.viewing.abort();var c=this.element,d=this.options,e=this.title,f=this.canvas,l=this.items[a],p=l.querySelector("img"),m=V(p,"originalUrl"),r=p.getAttribute("alt"),q=document.createElement("img");B(d.inheritedAttributes,function(y){var A=p.getAttribute(y);null!==A&&q.setAttribute(y,A)});q.src=m;q.alt=r;x(d.view)&&w(c,"view",d.view,{once:!0});if(!1===K(c,"view",{originalImage:this.images[a],index:a,image:q})||!this.isShown||this.hiding||this.played)return this;if(m=this.items[this.index])C(m,
ha),m.removeAttribute("aria-selected");u(l,ha);l.setAttribute("aria-selected",!0);d.focus&&l.focus();this.image=q;this.viewed=!1;this.index=a;this.imageData={};u(q,ba);d.loading&&u(f,Y);f.innerHTML="";f.appendChild(q);this.renderList();e.innerHTML="";var D=function(){var y=b.imageData,A=Array.isArray(d.title)?d.title[1]:d.title;y=x(A)?A.call(b,q,y):"".concat(r," (").concat(y.naturalWidth," \u00d7 ").concat(y.naturalHeight,")");y=n(y)?y.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,
"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):y;e.innerHTML=y},J,G;w(c,"viewed",D,{once:!0});this.viewing={abort:function(){F(c,"viewed",D);q.complete?b.imageRendering?b.imageRendering.abort():b.imageInitializing&&b.imageInitializing.abort():(q.src="",F(q,"load",J),b.timeout&&clearTimeout(b.timeout))}};q.complete?this.load():(w(q,"load",J=function(){F(q,"error",G);b.load()},{once:!0}),w(q,"error",G=function(){F(q,"load",J);b.timeout&&(clearTimeout(b.timeout),b.timeout=
!1);C(q,ba);d.loading&&C(b.canvas,Y)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){C(q,ba);b.timeout=!1},1E3));return this},prev:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,b=this.index-1;0>b&&(b=a?this.length-1:0);this.view(b);return this},next:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1,b=this.length-1,c=this.index+1;c>b&&(c=a?0:b);this.view(c);return this},move:function(a){var b=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:a,c=this.imageData;this.moveTo(E(a)?a:c.x+Number(a),E(b)?b:c.y+Number(b));return this},moveTo:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=this.element,f=this.options,l=this.imageData;a=Number(a);c=Number(c);if(this.viewed&&!this.played&&f.movable){var p=l.x,m=l.y,r=!1;v(a)?r=!0:a=p;v(c)?r=!0:c=m;if(r){x(f.move)&&w(e,"move",f.move,{once:!0});if(!1===K(e,"move",{x:a,
y:c,oldX:p,oldY:m,originalEvent:d}))return this;l.x=a;l.y=c;l.left=a;l.top=c;this.moving=!0;this.renderImage(function(){b.moving=!1;x(f.moved)&&w(e,"moved",f.moved,{once:!0});K(e,"moved",{x:a,y:c,oldX:p,oldY:m,originalEvent:d},{cancelable:!1})})}}return this},rotate:function(a){this.rotateTo((this.imageData.rotate||0)+Number(a));return this},rotateTo:function(a){var b=this,c=this.element,d=this.options,e=this.imageData;a=Number(a);if(v(a)&&this.viewed&&!this.played&&d.rotatable){var f=e.rotate;x(d.rotate)&&
w(c,"rotate",d.rotate,{once:!0});if(!1===K(c,"rotate",{degree:a,oldDegree:f}))return this;e.rotate=a;this.rotating=!0;this.renderImage(function(){b.rotating=!1;x(d.rotated)&&w(c,"rotated",d.rotated,{once:!0});K(c,"rotated",{degree:a,oldDegree:f},{cancelable:!1})})}return this},scaleX:function(a){this.scale(a,this.imageData.scaleY);return this},scaleY:function(a){this.scale(this.imageData.scaleX,a);return this},scale:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a,
d=this.element,e=this.options,f=this.imageData;a=Number(a);c=Number(c);if(this.viewed&&!this.played&&e.scalable){var l=f.scaleX,p=f.scaleY,m=!1;v(a)?m=!0:a=l;v(c)?m=!0:c=p;if(m){x(e.scale)&&w(d,"scale",e.scale,{once:!0});if(!1===K(d,"scale",{scaleX:a,scaleY:c,oldScaleX:l,oldScaleY:p}))return this;f.scaleX=a;f.scaleY=c;this.scaling=!0;this.renderImage(function(){b.scaling=!1;x(e.scaled)&&w(d,"scaled",e.scaled,{once:!0});K(d,"scaled",{scaleX:a,scaleY:c,oldScaleX:l,oldScaleY:p},{cancelable:!1})})}}return this},
zoom:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,e=this.imageData;a=Number(a);this.zoomTo(e.width*(0>a?1/(1-a):1+a)/e.naturalWidth,b,c,d);return this},zoomTo:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=3<arguments.length&&void 0!==arguments[3]?
arguments[3]:null,f=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!1,l=this.element,p=this.options,m=this.pointers,r=this.imageData,q=r.x,D=r.y,J=r.width,G=r.height,y=r.naturalWidth,A=r.naturalHeight;a=Math.max(0,a);if(v(a)&&this.viewed&&!this.played&&(f||p.zoomable)){f||(a=Math.min(Math.max(a,Math.max(.01,p.minZoomRatio)),Math.min(100,p.maxZoomRatio)));if(e)switch(e.type){case "wheel":.055<=p.zoomRatio&&.95<a&&1.05>a&&(a=1);break;case "pointermove":case "touchmove":case "mousemove":.99<
a&&1.01>a&&(a=1)}f=y*a;A*=a;y=f-J;var N=A-G,M=r.ratio;x(p.zoom)&&w(l,"zoom",p.zoom,{once:!0});if(!1===K(l,"zoom",{ratio:a,oldRatio:M,originalEvent:e}))return this;this.zooming=!0;e?(d=Ea(this.viewer),m=m&&0<Object.keys(m).length?Ka(m):{pageX:e.pageX,pageY:e.pageY},r.x-=(m.pageX-d.left-q)/J*y,r.y-=(m.pageY-d.top-D)/G*N):z(d)&&v(d.x)&&v(d.y)?(r.x-=(d.x-q)/J*y,r.y-=(d.y-D)/G*N):(r.x-=y/2,r.y-=N/2);r.left=r.x;r.top=r.y;r.width=f;r.height=A;r.oldRatio=M;r.ratio=a;this.renderImage(function(){b.zooming=
!1;x(p.zoomed)&&w(l,"zoomed",p.zoomed,{once:!0});K(l,"zoomed",{ratio:a,oldRatio:M,originalEvent:e},{cancelable:!1})});c&&this.tooltip()}return this},play:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;if(!this.isShown||this.played)return this;var c=this.element,d=this.options;x(d.play)&&w(c,"play",d.play,{once:!0});if(!1===K(c,"play"))return this;var e=this.player,f=this.loadImage.bind(this),l=[],p=0,m=0;this.played=!0;this.onLoadWhenPlay=f;b&&this.requestFullscreen(b);
u(e,Z);B(this.items,function(D,J){var G=D.querySelector("img"),y=document.createElement("img");y.src=V(G,"originalUrl");y.alt=G.getAttribute("alt");y.referrerPolicy=G.referrerPolicy;p+=1;u(y,ia);aa(y,I,d.transition);T(D,ha)&&(u(y,P),m=J);l.push(y);w(y,"load",f,{once:!0});e.appendChild(y)});if(v(d.interval)&&0<d.interval){var r=function(){clearTimeout(a.playing.timeout);C(l[m],P);--m;m=0<=m?m:p-1;u(l[m],P);a.playing.timeout=setTimeout(r,d.interval)},q=function(){clearTimeout(a.playing.timeout);C(l[m],
P);m+=1;m=m<p?m:0;u(l[m],P);a.playing.timeout=setTimeout(q,d.interval)};1<p&&(this.playing={prev:r,next:q,timeout:setTimeout(q,d.interval)})}return this},stop:function(){var a=this;if(!this.played)return this;var b=this.element,c=this.options;x(c.stop)&&w(b,"stop",c.stop,{once:!0});if(!1===K(b,"stop"))return this;b=this.player;clearTimeout(this.playing.timeout);this.played=this.playing=!1;B(b.getElementsByTagName("img"),function(d){F(d,"load",a.onLoadWhenPlay)});C(b,Z);b.innerHTML="";this.exitFullscreen();
return this},full:function(){var a=this,b=this.options,c=this.viewer,d=this.image,e=this.list;if(!this.isShown||this.played||this.fulled||!b.inline)return this;this.fulled=!0;this.open();u(this.button,ua);b.transition&&(C(e,I),this.viewed&&C(d,I));u(c,pa);c.setAttribute("role","dialog");c.setAttribute("aria-labelledby",this.title.id);c.setAttribute("aria-modal",!0);c.removeAttribute("style");O(c,{zIndex:b.zIndex});b.focus&&this.enforceFocus();this.initContainer();this.viewerData=Q({},this.containerData);
this.renderList();this.viewed&&this.initImage(function(){a.renderImage(function(){b.transition&&setTimeout(function(){u(d,I);u(e,I)},0)})});return this},exit:function(){var a=this,b=this.options,c=this.viewer,d=this.image,e=this.list;if(!this.isShown||this.played||!this.fulled||!b.inline)return this;this.fulled=!1;this.close();C(this.button,ua);b.transition&&(C(e,I),this.viewed&&C(d,I));b.focus&&this.clearEnforceFocus();c.removeAttribute("role");c.removeAttribute("aria-labelledby");c.removeAttribute("aria-modal");
C(c,pa);O(c,{zIndex:b.zIndexInline});this.viewerData=Q({},this.parentData);this.renderViewer();this.renderList();this.viewed&&this.initImage(function(){a.renderImage(function(){b.transition&&setTimeout(function(){u(d,I);u(e,I)},0)})});return this},tooltip:function(){var a=this,b=this.options,c=this.tooltipBox;if(!this.viewed||this.played||!b.tooltip)return this;c.textContent="".concat(Math.round(100*this.imageData.ratio),"%");this.tooltipping?clearTimeout(this.tooltipping):b.transition?(this.fading&&
K(c,"transitionend"),u(c,Z),u(c,ia),u(c,I),c.removeAttribute("aria-hidden"),c.initialOffsetWidth=c.offsetWidth,u(c,P)):(u(c,Z),c.removeAttribute("aria-hidden"));this.tooltipping=setTimeout(function(){b.transition?(w(c,"transitionend",function(){C(c,Z);C(c,ia);C(c,I);a.fading=!1},{once:!0}),C(c,P),a.fading=!0):C(c,Z);a.tooltipping=!1},1E3);return this},toggle:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;1===this.imageData.ratio?this.zoomTo(this.imageData.oldRatio,!0,
null,a):this.zoomTo(1,!0,null,a);return this},reset:function(){this.viewed&&!this.played&&(this.imageData=Q({},this.initialImageData),this.renderImage());return this},update:function(){var a=this,b=this.element,c=this.options,d=this.isImg;if(d&&!b.parentNode)return this.destroy();var e=[];B(d?[b]:b.querySelectorAll("img"),function(l){x(c.filter)?c.filter.call(a,l)&&e.push(l):a.getImageURL(l)&&e.push(l)});if(!e.length)return this;this.images=e;this.length=e.length;if(this.ready){var f=[];B(this.items,
function(l,p){l=l.querySelector("img");var m=e[p];m&&l?(m.src!==l.src||m.alt!==l.alt)&&f.push(p):f.push(p)});O(this.list,{width:"auto"});this.initList();this.isShown&&(this.length?this.viewed&&(b=f.indexOf(this.index),0<=b?(this.viewed=!1,this.view(Math.max(Math.min(this.index-b,this.length-1),0))):(b=this.items[this.index],u(b,ha),b.setAttribute("aria-selected",!0))):(this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""))}else this.build();
return this},destroy:function(){var a=this.element,b=this.options;if(!a.viewer)return this;this.destroyed=!0;this.ready?(this.played&&this.stop(),b.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):
b.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort());b.inline||F(a,"click",this.onStart);a.viewer=void 0;return this}},{getImageURL:function(a){var b=this.options.url;return b=n(b)?a.getAttribute(b):x(b)?b.call(this,a):""},enforceFocus:function(){var a=this;this.clearEnforceFocus();w(document,"focusin",this.onFocusin=function(b){var c=a.viewer;b=b.target;if(b!==document&&b!==c&&!c.contains(b)){for(;b;){if(null!==b.getAttribute("tabindex")||"true"===b.getAttribute("aria-modal"))return;
b=b.parentElement}c.focus()}})},clearEnforceFocus:function(){this.onFocusin&&(F(document,"focusin",this.onFocusin),this.onFocusin=null)},open:function(){var a=this.body;u(a,va);0<this.scrollbarWidth&&(a.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px"))},close:function(){var a=this.body;C(a,va);0<this.scrollbarWidth&&(a.style.paddingRight=this.initialBodyPaddingRight)},shown:function(){var a=this.element,b=this.options,c=this.viewer;this.isShown=
this.fulled=!0;this.render();this.bind();this.showing=!1;b.focus&&(c.focus(),this.enforceFocus());x(b.shown)&&w(a,"shown",b.shown,{once:!0});!1!==K(a,"shown")&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var a=this.element,b=this.options,c=this.viewer;b.fucus&&this.clearEnforceFocus();this.close();this.unbind();u(c,U);c.removeAttribute("role");c.removeAttribute("aria-labelledby");c.removeAttribute("aria-modal");this.resetList();this.resetImage();this.hiding=this.isShown=
this.viewed=this.fulled=!1;this.destroyed||(x(b.hidden)&&w(a,"hidden",b.hidden,{once:!0}),K(a,"hidden",null,{cancelable:!1}))},requestFullscreen:function(a){var b=this.element.ownerDocument;!this.fulled||b.fullscreenElement||b.webkitFullscreenElement||b.mozFullScreenElement||b.msFullscreenElement||(b=b.documentElement,b.requestFullscreen?z(a)?b.requestFullscreen(a):b.requestFullscreen():b.webkitRequestFullscreen?b.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):b.mozRequestFullScreen?b.mozRequestFullScreen():
b.msRequestFullscreen&&b.msRequestFullscreen())},exitFullscreen:function(){var a=this.element.ownerDocument;this.fulled&&(a.fullscreenElement||a.webkitFullscreenElement||a.mozFullScreenElement||a.msFullscreenElement)&&(a.exitFullscreen?a.exitFullscreen():a.webkitExitFullscreen?a.webkitExitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.msExitFullscreen&&a.msExitFullscreen())},change:function(a){var b=this.options,c=this.pointers,d=c[Object.keys(c)[0]];if(d){var e=d.endX-d.startX;d=d.endY-
d.startY;switch(this.action){case "move":if(0!==e||0!==d)this.pointerMoved=!0,this.move(e,d,a);break;case "zoom":this.zoom(Ja(c),!1,null,a);break;case "switch":this.action="switched",a=Math.abs(e),1<a&&a>Math.abs(d)&&(this.pointers={},1<e?this.prev(b.loop):-1>e&&this.next(b.loop))}B(c,function(f){f.startX=f.endX;f.startY=f.endY})}},isSwitchable:function(){var a=this.imageData,b=this.viewerData;return 1<this.length&&0<=a.x&&0<=a.y&&a.width<=b.width&&a.height<=b.height}});return X});
