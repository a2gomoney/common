<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head meta_screenName="QRCode UDC 전용 팝업창">
        <w2:type>COMPONENT</w2:type>
        <w2:buildDate/>
        <w2:MSA/>
        <xf:model>
            <w2:dataCollection baseNode="map"/>
            <w2:workflowCollection/>
        </xf:model>
        <w2:layoutInfo/>
        <w2:publicInfo method=""/>
        <script lazy="false" type="text/javascript"><![CDATA[/**
 * @event
 * @name onpageload
 * @description QRCode 팝업창을 load한 후 발생되는 이벤트
 */
scwin.onpageload = function () {
    // parameter 바인딩
    let param = $c.data.getParameter('param');

    let txtVal;

    if (param.status == 'url') {
        txtVal = param.url;
    } else if (param.status == 'email') {
        txtVal = param.email;
    } else if (param.status == 'vcard') {
        txtVal = param.vcard;
    } else if (param.status == 'calendar') {
        txtVal = param.calendar;
    } else {
        txtVal = param;
    }

    // QRCode 생성 함수 자리
    scwin.qrCode = new QRCode(document.getElementById(grp_qr.getID()), {
        text: txtVal,
        width: 208,
        height: 208,
        colorDark: "#000000",
        colorLight: "#ffffff",
        correctLevel: QRCode.CorrectLevel.M
    })
};


/**
 * @event
 * @name onbeforepageunload
 * @description QRCode 팝업창을 닫기 전 발생하는 이벤트
 */
scwin.onbeforepageunload = function () {
    // 직접 clear
    const dom = document.getElementById(grp_qr.getID());

    for (let i = 0; i > dom.childNodes.length; i++) {
        dom.removeChild(dom.children[0]);
    };
};
]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload" ev:onbeforepageunload="scwin.onbeforepageunload">
    	<xf:group class="pop_contents" id="">
    		<xf:group style="width: 100%;height: 100%;" class="section" id="grp_qr"></xf:group>
    	</xf:group>
    </body>
</html>
